<div class="loading-spinner" *ngIf="isLoading">
    <mat-spinner [diameter]="85"></mat-spinner>
</div>
<div>
    <div class="row" style="justify-content: center;">
        <div class="col-md-6 col-lg-6 mb-12 text-center">
            <div class="card border-0 rounded-0">
                <div class="card-body">
            <div class="card-body card-autentication">
                <h3 class="card-title title-autentication">Crie a sua conta</h3>
                <form [formGroup]="registerForm" #formDir="ngForm" (ngSubmit)="formDir.valid && signUp()">
                    <div class="mb-3 input-group">
                        <div class="input-group-text">
                            <span class="bi bi-person"></span>
                        </div>
                        <input [formControl]="name" type="text" class="form-control" placeholder="Nome completo"
                            [ngClass]="{ 'is-invalid': name.invalid && formDir.submitted }" id="name">
                    </div>
                    <div class="row validation-error" *ngIf="name.invalid && formDir.submitted">
                        <p>O nome é obrigatório*</p>
                    </div>
                    <div class="mb-3 input-group">
                        <div class="input-group-text">
                            <span class="bi bi-envelope"></span>
                        </div>
                        <input [formControl]="email" [ngClass]="{ 'is-invalid': (email.invalid || emailAlreadyExists) && formDir.submitted }"
                            type="email" class="form-control" placeholder="E-mail" id="email">
                    </div>
                    <div class="row validation-error" *ngIf="(email.invalid || emailAlreadyExists) && formDir.submitted">
                        <p>{{ emailInvalidLabel }}</p>
                    </div>
                    <div class="mb-3 input-group">
                        <div class="input-group-text">
                            <span class="bi bi-key"></span>
                        </div>
                        <input [formControl]="password" type="password" class="form-control inputPassword" id="password"
                            placeholder="Senha" [ngClass]="{ 'is-invalid': password.invalid && formDir.submitted }">
                    </div>
                    <div class="row validation-error" *ngIf="password.invalid && formDir.submitted">
                        <p>{{ passwordInvalidLabel }}</p>
                    </div>
                    <div class="mb-3 input-group">
                        <div class="input-group-text">
                            <span class="bi bi-key"></span>
                        </div>
                        <input [formControl]="confirmPassword" type="password" class="form-control inputConfirmPassword"
                            id="confirmPassword" placeholder="Confirme a senha" aria-label="Confirme a Senha"
                            [ngClass]="{ 'is-invalid': confirmPassword.invalid && !password.invalid && confirmPassword.value && formDir.submitted }">
                        <button type="button" class="btn btn-outline-secondary eye-button"
                            (click)="toggleConfirmPassword()">
                            <span class="bi eye-icon"
                                [ngClass]="{'bi-eye-slash': !showConfirmPassword, 'bi-eye': showConfirmPassword}"></span>
                        </button>
                    </div>
                    <div class="row validation-error" *ngIf="confirmPassword.invalid && !password.invalid && confirmPassword.value && formDir.submitted">
                        <p>A confirmação não bate com a senha*</p>
                    </div>
                    <div class="text-center mt-3">
                        <button type="submit" class="btn btn-primary btn-autentication" style="width: 100%; border-radius: 30.4px; margin-top: 32px">
                            Cadastrar
                        </button>
                    </div>
                    <div class="text-center mt-3">
                        <a class="btn btn-outline-secondary" routerLink="/login"
                            style="width: 100%; border-radius: 30.4px;">
                            Voltar
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>